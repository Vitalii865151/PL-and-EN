<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <title>Language Learning</title>
  <style>
    body {
      background: #ccc;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    header {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    button {
      padding: 6px 10px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #eee;
    }
    button.active {
      background: #4287f5;
      color: white;
    }
    .row {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      gap: 10px;
      flex-wrap: wrap;
    }
    .row span {
      min-width: 240px;
    }
    input {
      padding: 6px;
      font-size: 14px;
    }
    .status {
      width: 20px;
      text-align: center;
      font-size: 18px;
    }
    .hint {
      font-size: 13px;
      color: #444;
      font-style: italic;
      margin-left: 250px;
      flex-basis: 100%;
    }
  </style>
</head>
<body>
  <header>
    <button id="btnPl">PL</button>
    <button id="btnEn">EN</button>
    <button id="btnReverse">↔ Reverse</button>
  </header>

  <div id="container"></div>

  <script>
    let blocks = [];
    let currentLang = "pl";
    let reverse = false;

    // load JSON
    fetch("blocks.json")
      .then(r => r.json())
      .then(data => {
        blocks = data;
        render();
      });

    function render() {
      const container = document.getElementById("container");
      container.innerHTML = "";

      blocks.forEach((block, idx) => {
        const row = document.createElement("div");
        row.className = "row";

        const text = document.createElement("span");
        text.textContent = reverse ? block["en"] : block[currentLang];
        row.appendChild(text);

        const input = document.createElement("input");
        input.type = "text";
        row.appendChild(input);

        const btn = document.createElement("button");
        btn.textContent = "✔";
        row.appendChild(btn);

        const status = document.createElement("div");
        status.className = "status";
        row.appendChild(status);

        const hintBtn = document.createElement("button");
        hintBtn.textContent = "?";
        row.appendChild(hintBtn);

        const hint = document.createElement("div");
        hint.className = "hint";
        hint.style.display = "none";
        row.appendChild(hint);

        btn.onclick = () => {
          const targetLang = reverse ? "pl" : (currentLang === "pl" ? "en" : "pl");
          const correct = block[targetLang].trim().toLowerCase();
          const user = input.value.trim().toLowerCase();
          if (user && user === correct) {
            status.textContent = "✅";
          } else {
            status.textContent = "❌";
          }
        };

        input.addEventListener("keydown", e => {
          if (e.key === "Enter") btn.click();
        });

        hintBtn.onclick = () => {
          const targetLang = reverse ? "pl" : (currentLang === "pl" ? "en" : "pl");
          hint.textContent = "Подсказка: " + block[targetLang];
          hint.style.display = "block";
        };

        container.appendChild(row);
      });
    }

    document.getElementById("btnPl").onclick = () => {
      currentLang = "pl";
      reverse = false;
      render();
      setActive("btnPl");
    };
    document.getElementById("btnEn").onclick = () => {
      currentLang = "en";
      reverse = false;
      render();
      setActive("btnEn");
    };
    document.getElementById("btnReverse").onclick = () => {
      reverse = !reverse;
      render();
    };

    function setActive(id) {
      document.getElementById("btnPl").classList.remove("active");
      document.getElementById("btnEn").classList.remove("active");
      document.getElementById(id).classList.add("active");
    }

    setActive("btnPl");
  </script>
</body>
</html>
